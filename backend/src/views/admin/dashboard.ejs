<%# Admin Dashboard - Main admin panel with stats and market list %>
    <%- include('../layouts/main', { body: ` <!-- Admin Mode Indicator -->
        <div class="mb-6 flex items-center gap-3 p-4 rounded-xl bg-yellow-500/10 border border-yellow-500/30">
            <div class="w-3 h-3 rounded-full bg-yellow-400 animate-pulse"></div>
            <div class="flex-1">
                <span class="font-semibold text-yellow-400">Admin Mode Active</span>
                <span class="text-yellow-200/70 text-sm ml-2">Managing FoundersNet Markets</span>
            </div>
            <a href="/" class="text-yellow-400 hover:text-yellow-300 text-sm">Exit Admin â†’</a>
        </div>

        <!-- Stats Grid -->
        <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mb-8">
            <!-- Total Markets -->
            <div class="card-glass rounded-xl p-5">
                <div class="text-gray-400 text-xs uppercase tracking-wider mb-2">Total Markets</div>
                <div class="text-3xl font-bold text-white">
                    <%= stats.totalMarkets %>
                </div>
            </div>

            <!-- Active Bets -->
            <div class="card-glass rounded-xl p-5">
                <div class="text-gray-400 text-xs uppercase tracking-wider mb-2">Open Markets</div>
                <div class="text-3xl font-bold text-yes">
                    <%= stats.openMarkets %>
                </div>
            </div>

            <!-- Pending Resolutions -->
            <div class="card-glass rounded-xl p-5 <%= stats.pendingResolutions > 0 ? 'border-yellow-500/50' : '' %>">
                <div class="text-gray-400 text-xs uppercase tracking-wider mb-2">Pending Resolution</div>
                <div class="text-3xl font-bold <%= stats.pendingResolutions > 0 ? 'text-yellow-400' : 'text-white' %>">
                    <%= stats.pendingResolutions %>
                </div>
            </div>

            <!-- Total Volume -->
            <div class="card-glass rounded-xl p-5">
                <div class="text-gray-400 text-xs uppercase tracking-wider mb-2">Total Volume</div>
                <div
                    class="text-3xl font-bold bg-gradient-to-r from-primary to-secondary bg-clip-text text-transparent">
                    $<%= stats.totalVolume %>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="flex flex-wrap gap-4 mb-8">
            <a href="/admin/create-market" class="flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl font-medium transition-all
      hover:shadow-lg hover:shadow-primary/25 active:scale-[0.98]">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                </svg>
                Create New Market
            </a>

            <button onclick="refreshStats()"
                class="flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/15 text-white rounded-xl font-medium transition-all">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                Refresh
            </button>
        </div>

        <!-- Pending Resolutions Section -->
        <% if (pendingMarkets && pendingMarkets.length> 0) { %>
            <div class="mb-8">
                <h2 class="text-xl font-bold mb-4 flex items-center gap-2">
                    <span class="w-2 h-2 rounded-full bg-yellow-400 animate-pulse"></span>
                    Pending Resolutions
                    <span class="px-2 py-0.5 bg-yellow-500/20 text-yellow-400 text-sm rounded-full">
                        <%= pendingMarkets.length %>
                    </span>
                </h2>
                <div class="space-y-3">
                    <% pendingMarkets.forEach(function(market) { %>
                        <div class="card-glass rounded-xl p-4 border-yellow-500/30">
                            <div class="flex flex-col md:flex-row md:items-center justify-between gap-4">
                                <div class="flex-1">
                                    <h3 class="font-medium text-white mb-1">
                                        <%= market.question %>
                                    </h3>
                                    <div class="flex flex-wrap gap-3 text-sm text-gray-400">
                                        <span>ID: #<%= market.id %></span>
                                        <span>YES: $<%= market.yesPoolFormatted %></span>
                                        <span>NO: $<%= market.noPoolFormatted %></span>
                                        <span>Closed: <%= market.closeTimeFormatted %></span>
                                    </div>
                                </div>
                                <a href="/admin/resolve/<%= market.id %>" class="px-4 py-2 bg-yellow-500 hover:bg-yellow-600 text-black rounded-lg font-medium text-sm transition-all
                  whitespace-nowrap">
                                    Resolve Market
                                </a>
                            </div>
                        </div>
                        <% }); %>
                </div>
            </div>
            <% } %>

                <!-- All Markets Table -->
                <div>
                    <h2 class="text-xl font-bold mb-4">All Markets</h2>

                    <% if (!markets || markets.length===0) { %>
                        <div class="card-glass rounded-xl p-8 text-center">
                            <svg class="w-16 h-16 mx-auto text-gray-500 mb-4" fill="none" stroke="currentColor"
                                viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4" />
                            </svg>
                            <p class="text-gray-400 mb-4">No markets created yet.</p>
                            <a href="/admin/create-market"
                                class="inline-flex items-center gap-2 px-6 py-3 btn-primary text-white rounded-xl">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                        d="M12 4v16m8-8H4" />
                                </svg>
                                Create Your First Market
                            </a>
                        </div>
                        <% } else { %>
                            <div class="card-glass rounded-xl overflow-hidden">
                                <div class="overflow-x-auto">
                                    <table class="w-full">
                                        <thead>
                                            <tr class="border-b border-white/10">
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    ID</th>
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    Question</th>
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    Status</th>
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    YES Pool</th>
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    NO Pool</th>
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    Close Time</th>
                                                <th
                                                    class="px-4 py-3 text-left text-xs font-medium text-gray-400 uppercase tracking-wider">
                                                    Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-white/5">
                                            <% markets.forEach(function(market) { %>
                                                <tr class="hover:bg-white/5 transition-colors">
                                                    <td class="px-4 py-3 text-sm font-mono text-gray-300">#<%= market.id
                                                            %>
                                                    </td>
                                                    <td class="px-4 py-3">
                                                        <a href="/market/<%= market.id %>"
                                                            class="text-white hover:text-primary transition-colors">
                                                            <%= market.question.length> 50 ?
                                                                market.question.substring(0, 50) + '...' :
                                                                market.question %>
                                                        </a>
                                                    </td>
                                                    <td class="px-4 py-3">
                                                        <span
                                                            class="px-2 py-1 rounded-full text-xs font-medium
                                <% if (market.isOpen) { %>bg-yes/20 text-yes<% } else if (market.isClosed && !market.isResolved) { %>bg-yellow-500/20 text-yellow-400<% } else { %>bg-gray-500/20 text-gray-400<% } %>">
                                                            <%= market.stateLabel %>
                                                                <% if (market.isResolved) { %> (<%= market.outcomeLabel
                                                                        %>)<% } %>
                                                        </span>
                                                    </td>
                                                    <td class="px-4 py-3 text-sm text-yes">$<%= market.yesPoolFormatted
                                                            %>
                                                    </td>
                                                    <td class="px-4 py-3 text-sm text-no">$<%= market.noPoolFormatted %>
                                                    </td>
                                                    <td class="px-4 py-3 text-sm text-gray-400">
                                                        <%= market.closeTimeFormatted %>
                                                    </td>
                                                    <td class="px-4 py-3">
                                                        <div class="flex items-center gap-2">
                                                            <a href="/market/<%= market.id %>"
                                                                class="px-3 py-1 bg-white/10 hover:bg-white/20 rounded text-xs transition-colors">
                                                                View
                                                            </a>
                                                            <% if (market.isClosed && !market.isResolved) { %>
                                                                <a href="/admin/resolve/<%= market.id %>"
                                                                    class="px-3 py-1 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 rounded text-xs transition-colors">
                                                                    Resolve
                                                                </a>
                                                                <% } %>
                                                        </div>
                                                    </td>
                                                </tr>
                                                <% }); %>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                            <% } %>
                </div>

                <!-- Contract Info -->
                <div class="mt-8 card-glass rounded-xl p-6">
                    <h3 class="text-sm font-medium text-gray-400 mb-3">Contract Information</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div>
                            <span class="text-gray-500">Contract Address:</span>
                            <a href="<%= blockExplorer %>/address/<%= contractAddress %>" target="_blank"
                                rel="noopener noreferrer" class="ml-2 text-primary hover:underline font-mono break-all">
                                <%= contractAddress %>
                            </a>
                        </div>
                        <div>
                            <span class="text-gray-500">Network:</span>
                            <span class="ml-2 text-white">
                                <%= networkName %> (Chain ID: <%= chainId %>)
                            </span>
                        </div>
                        <div>
                            <span class="text-gray-500">USDC Address:</span>
                            <a href="<%= blockExplorer %>/address/<%= usdcAddress %>" target="_blank"
                                rel="noopener noreferrer" class="ml-2 text-primary hover:underline font-mono break-all">
                                <%= usdcAddress %>
                            </a>
                        </div>
                        <div>
                            <span class="text-gray-500">Admin Address:</span>
                            <span class="ml-2 text-yellow-400 font-mono break-all">
                                <%= adminAddress %>
                            </span>
                        </div>
                    </div>
                </div>

                <script>
                    function refreshStats() {
                        window.location.reload();
                    }
                </script>
                ` }) %>